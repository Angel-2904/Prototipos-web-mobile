<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>GanaCoNaval — Prototipo Dashboard</title>
    <meta
      name="description"
      content="Prototipo de dashboard: Solicitudes, Autorizaciones, Repositorio, Histórico, Monitoreo y Reportes."
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- SIDEBAR -->
    <aside class="sidebar" role="navigation" aria-label="Barra lateral">
      <div class="brand">
        <div class="logo">GN</div>
        <div>
          <div class="brand-title">GanaCoNaval</div>
          <div class="brand-sub">Operaciones y autorizaciones</div>
        </div>
      </div>

      <nav class="menu" role="menu">
        <button class="menu-item active" data-view="dashboard">
          Dashboard
        </button>
        <button class="menu-item" data-view="solicitudes">Solicitudes</button>
        <button class="menu-item" data-view="autorizaciones">
          Autorizaciones
        </button>
        <button class="menu-item" data-view="repositorio">Repositorio</button>
        <button class="menu-item" data-view="historico">Histórico</button>
        <button class="menu-item" data-view="monitoreo">Monitoreo</button>
        <button class="menu-item" data-view="reportes">Reportes</button>
        <button class="menu-item" data-view="admin">Administración</button>
      </nav>

      <div class="sidebar-footer">
        <small>Equipo SISO — Administrador</small>
        <div class="muted">© <span id="year"></span></div>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content" role="main">
      <!-- DASHBOARD -->
      <section class="view" data-view="dashboard">
        <header class="view-header">
          <h1>Dashboard</h1>
          <div class="view-actions">
            <button id="openNewRequest" class="primary">Crear solicitud</button>
          </div>
        </header>

        <div class="cards">
          <div class="card stat">
            <div class="muted">Solicitudes activas</div>
            <div class="big" id="statActive">0</div>
          </div>
          <div class="card stat">
            <div class="muted">Pendientes por autorización</div>
            <div class="big" id="statPending">0</div>
          </div>
          <div class="card stat">
            <div class="muted">Archivos en repositorio</div>
            <div class="big" id="statFiles">0</div>
          </div>
        </div>

        <div class="panel">
          <h2>Resumen rápido</h2>
          <p class="muted">
            Vista general de las solicitudes y autorizaciones. Usa las secciones
            laterales para administrar y revisar elementos uno por uno.
          </p>
        </div>

        <!-- Comentarios -->
        <div class="panel">
          <h3>Comentarios sobre Dashboard</h3>
          <form
            class="comment-form"
            data-screen="Dashboard"
            id="comment-dashboard"
          >
            <input type="hidden" name="screen" value="Dashboard" />
            <input
              type="text"
              name="name"
              placeholder="Tu nombre (tester)"
              required
            />
            <input
              type="email"
              name="email"
              placeholder="tu@correo.com"
              required
            />
            <textarea
              name="message"
              placeholder="Tu comentario sobre esta pantalla..."
              rows="3"
              required
            ></textarea>
            <div style="display: flex; gap: 8px; align-items: center">
              <button class="secondary" type="submit">Enviar comentario</button>
              <small class="muted"
                >Los comentarios se guardan localmente o se pueden enviar a
                Formspree.</small
              >
            </div>
          </form>
        </div>
      </section>

      <!-- SOLICITUDES -->
      <section class="view hidden" data-view="solicitudes">
        <header class="view-header">
          <h1>Solicitudes</h1>
          <div class="view-actions">
            <button id="openNewRequest2" class="primary">
              Nueva solicitud
            </button>
          </div>
        </header>

        <div class="panel">
          <h3>Lista de solicitudes</h3>
          <table class="table" id="tableSolicitudes">
            <thead>
              <tr>
                <th>ID</th>
                <th>Título</th>
                <th>Solicitante</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- MODAL: Ver solicitud -->
        <div
          id="modalView"
          class="modal hidden"
          role="dialog"
          aria-modal="true"
        >
          <div class="modal-content">
            <h3>Detalle de solicitud</h3>
            <div id="viewDetails"><!-- datos dinámicos --></div>
            <div
              style="
                display: flex;
                gap: 8px;
                justify-content: flex-end;
                margin-top: 12px;
              "
            >
              <button type="button" id="closeViewModal" class="secondary">
                Cerrar
              </button>
            </div>
          </div>
        </div>

        <!-- Comentarios -->
        <div class="panel">
          <h3>Comentarios — Solicitudes</h3>
          <form
            class="comment-form"
            data-screen="Solicitudes"
            id="comment-solicitudes"
          >
            <input type="hidden" name="screen" value="Solicitudes" />
            <input
              type="text"
              name="name"
              placeholder="Tu nombre (tester)"
              required
            />
            <input
              type="email"
              name="email"
              placeholder="tu@correo.com"
              required
            />
            <textarea
              name="message"
              placeholder="Tu comentario sobre esta pantalla..."
              rows="3"
              required
            ></textarea>
            <div style="display: flex; gap: 8px; align-items: center">
              <button class="secondary" type="submit">Enviar comentario</button>
              <small class="muted"
                >Los comentarios se guardan localmente o se pueden enviar a
                Formspree.</small
              >
            </div>
          </form>
        </div>
      </section>

      <!-- AUTORIZACIONES -->
      <section class="view hidden" data-view="autorizaciones">
        <header class="view-header"><h1>Autorizaciones</h1></header>
        <div class="panel">
          <h3>Solicitudes pendientes</h3>
          <table class="table" id="tableAutorizaciones">
            <thead>
              <tr>
                <th>ID</th>
                <th>Título</th>
                <th>Solicitante</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Comentarios -->
        <div class="panel">
          <h3>Comentarios — Autorizaciones</h3>
          <form
            class="comment-form"
            data-screen="Autorizaciones"
            id="comment-autorizaciones"
          >
            <input type="hidden" name="screen" value="Autorizaciones" />
            <input
              type="text"
              name="name"
              placeholder="Tu nombre (tester)"
              required
            />
            <input
              type="email"
              name="email"
              placeholder="tu@correo.com"
              required
            />
            <textarea
              name="message"
              placeholder="Tu comentario sobre esta pantalla..."
              rows="3"
              required
            ></textarea>
            <div style="display: flex; gap: 8px; align-items: center">
              <button class="secondary" type="submit">Enviar comentario</button>
              <small class="muted"
                >Los comentarios se guardan localmente o se pueden enviar a
                Formspree.</small
              >
            </div>
          </form>
        </div>
      </section>

      <!-- REPOSITORIO -->
      <section class="view hidden" data-view="repositorio">
        <header class="view-header"><h1>Repositorio</h1></header>

        <div class="panel">
          <h3>Subir archivos</h3>
          <input id="fileInput" type="file" multiple />
          <div style="margin-top: 12px" id="fileList"></div>
        </div>

        <div class="panel">
          <h3>Comentarios — Repositorio</h3>
          <form
            class="comment-form"
            data-screen="Repositorio"
            id="comment-repositorio"
          >
            <input type="hidden" name="screen" value="Repositorio" />
            <input
              type="text"
              name="name"
              placeholder="Tu nombre (tester)"
              required
            />
            <input
              type="email"
              name="email"
              placeholder="tu@correo.com"
              required
            />
            <textarea
              name="message"
              placeholder="Tu comentario sobre esta pantalla..."
              rows="3"
              required
            ></textarea>
            <div style="display: flex; gap: 8px; align-items: center">
              <button class="secondary" type="submit">Enviar comentario</button>
              <small class="muted"
                >Los comentarios se guardan localmente o se pueden enviar a
                Formspree.</small
              >
            </div>
          </form>
        </div>
      </section>

      <!-- HISTÓRICO -->
      <section class="view hidden" data-view="historico">
        <header class="view-header"><h1>Histórico</h1></header>

        <div class="panel">
          <h3>Registro de solicitudes</h3>
          <table class="table" id="tableHistorico">
            <thead>
              <tr>
                <th>ID</th>
                <th>Título</th>
                <th>Estado</th>
                <th>Fecha</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="panel">
          <h3>Comentarios — Histórico</h3>
          <form
            class="comment-form"
            data-screen="Histórico"
            id="comment-historico"
          >
            <input type="hidden" name="screen" value="Histórico" />
            <input
              type="text"
              name="name"
              placeholder="Tu nombre (tester)"
              required
            />
            <input
              type="email"
              name="email"
              placeholder="tu@correo.com"
              required
            />
            <textarea
              name="message"
              placeholder="Tu comentario sobre esta pantalla..."
              rows="3"
              required
            ></textarea>
            <div style="display: flex; gap: 8px; align-items: center">
              <button class="secondary" type="submit">Enviar comentario</button>
              <small class="muted"
                >Los comentarios se guardan localmente o se pueden enviar a
                Formspree.</small
              >
            </div>
          </form>
        </div>
      </section>

      <!-- MONITOREO -->
      <section class="view hidden" data-view="monitoreo">
        <header class="view-header"><h1>Monitoreo</h1></header>

        <div class="panel">
          <h3>Indicadores</h3>
          <div class="grid-3">
            <div class="card">
              <div class="muted">CPU</div>
              <div class="big">12%</div>
            </div>
            <div class="card">
              <div class="muted">Latencia</div>
              <div class="big">220 ms</div>
            </div>
            <div class="card">
              <div class="muted">Eventos recientes</div>
              <div class="big">14</div>
            </div>
          </div>
        </div>
      </section>

      <!-- REPORTES -->
      <section class="view hidden" data-view="reportes">
        <header class="view-header"><h1>Reportes</h1></header>

        <div class="panel">
          <h3>Exportar datos</h3>
          <p class="muted">Descarga un CSV con el historial de solicitudes.</p>
          <div style="display: flex; gap: 8px">
            <button id="downloadCSV" class="primary">Descargar CSV</button>
          </div>
        </div>
      </section>

      <!-- ADMIN -->
      <section class="view hidden" data-view="admin">
        <header class="view-header"><h1>Administración</h1></header>

        <div class="panel">
          <h3>Usuarios habilitados</h3>
          <table class="table" id="tableUsers">
            <thead>
              <tr>
                <th>Usuario</th>
                <th>Rol</th>
                <th>Habilitado</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </main>

    <!-- MODAL: Nueva solicitud -->
    <div id="modal" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content">
        <h3>Nueva solicitud</h3>
        <form id="newRequestForm">
          <label for="reqTitle">Título</label>
          <input id="reqTitle" name="title" type="text" required />
          <label for="reqUser">Solicitante</label>
          <input id="reqUser" name="user" type="text" required />
          <label for="reqDesc">Descripción</label>
          <textarea id="reqDesc" name="desc" rows="4"></textarea>
          <div
            style="
              display: flex;
              gap: 8px;
              justify-content: flex-end;
              margin-top: 12px;
            "
          >
            <button type="button" id="closeModal" class="secondary">
              Cancelar
            </button>
            <button type="submit" class="primary">Crear</button>
          </div>
        </form>
      </div>
    </div>

    <script src="script.js" defer></script>
  </body>
</html>
